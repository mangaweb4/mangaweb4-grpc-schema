syntax = "proto3";

option go_package = "github.com/mangaweb4/mangaweb4-backend/grpc";

service Browse {
  rpc List(BrowseListRequest) returns (BrowseListResponse) {}
  rpc Thumbnail(BrowseThumbnailRequest) returns (BrowseThumbnailResponse) {}
}

enum Filter {
  FILTER_UNKNOWN = 0;
  FILTER_FAVORITE_ITEMS = 1;
  FILTER_FAVORITE_TAGS = 2;
}

enum SortField {
  SORT_FIELD_NAME = 0;
  SORT_FIELD_CREATION_TIME = 1;
  SORT_FIELD_PAGECOUNT = 2;
}

enum SortOrder {
  SORT_ORDER_ASCENDING = 0;
  SORT_ORDER_DESCENDING = 1;
}

message BrowseListRequest {
  string User = 1;
  string Tag = 2;
  Filter Filter = 3;
  int32 Page = 4;
  int32 ItemPerPage = 5;
  string Search = 6;
  SortField Sort = 7;
  SortOrder Order = 8;
}

message BrowseListResponse {
  bool TagFavorite = 1;
  int32 TotalPage = 2;
  repeated BrowseListResponseItem Items = 3;
}

message BrowseListResponseItem {
  int32 Id = 1;
  string Name = 2;
  bool IsFavorite = 3;
  bool IsRead = 4;
  int32 PageCount = 5;
  bool HasFavoriteTag = 6;
}

message BrowseThumbnailRequest { string Name = 1; }

message BrowseThumbnailResponse {
  string ContentType = 1;
  bytes Data = 2;
}